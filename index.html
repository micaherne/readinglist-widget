<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Reading List</title>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript">
	var classcode = Widget.preferences.getItem('courseid');
	function getReadingList(){
			//e.preventDefault();
			
			var url = 'http://classes.myplace.strath.ac.uk/blocks/liblinks/ajax.php?classcode=' + classcode ;//$('#classcode').val();
			if(Widget && typeof Widget.proxify === 'function'){
				url = Widget.proxify(url);
			};
			//$.getJSON('fakedata.json', function(data){
			$.getJSON(url, function(data){
				$('#results li').remove();
				if(data.readingList.length === 0){
					$('#results ul').append('<li><i>No items found</i></li>');
				};
				$.each(data.readingList, function(i, item){
					$('#results ul').append('<li><a href="' + item.link + '">' + item.title + '</a></li>');
				});
				
			});
	}
	$(document).ready(function(){
		
		$('form').submit(function(e) {
			e.preventDefault();
			getReadingList();
		});
		if (classcode != undefined) {
			$('#searchform').hide();
			getReadingList();
		}
		else {
			
		}
	});
</script>
<style type="text/css">
	body {
		font-family: Verdana, Arial, Helvetica, sans-serif;
	}
	h1 {
		font-weight: normal;
		font-size: 1.3em;
	}
</style>
</head>
<body>
<!--<h1>Reading Lists</h1>
--><div id="searchform">
	<form>
		<label for="classcode">Class Code</label>
		<input id="classcode" type="text" name="classcode" size="5" />
	</form>
</div>
<div id="results">
<ul>
</ul>
</div>
</body>
</html>